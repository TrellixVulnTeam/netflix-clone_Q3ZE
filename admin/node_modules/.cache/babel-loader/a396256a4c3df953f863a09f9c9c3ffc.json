{"ast":null,"code":"var _jsxFileName = \"/Users/simoncatalin/Desktop/JavaScript/netflix-clone/admin/src/pages/new-product/NewProduct.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport './newProduct.scss';\nimport storage from '../../firebase';\nimport { createMovie } from '../../context/movieContext/apiCalls';\nimport { MovieContext } from '../../context/movieContext/MovieContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewProduct() {\n  _s();\n\n  const [movie, setMovie] = useState(null);\n  const [img, setImg] = useState(null);\n  const [imgTitle, setImgTitle] = useState(null);\n  const [imgSm, setImgSm] = useState(null);\n  const [trailer, setTrailer] = useState(null);\n  const [video, setVideo] = useState(null);\n  const [uploaded, setUploaded] = useState(null);\n  const {\n    dispatch\n  } = useContext(MovieContext);\n\n  const handleChange = e => {\n    const value = e.target.value;\n    setMovie({ ...movie,\n      [e.target.name]: value\n    });\n  }; // UPLOAD FILE\n\n\n  const upload = items => {\n    items.forEach(item => {\n      const fileName = new Date().getTime() + item.label + item.file.name;\n      const uploadTask = storage.ref(`/items/${fileName}`).put(item.file);\n      uploadTask.on('state_changed', snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log('Upload is ' + progress + '% done.');\n      }, err => {\n        console.log(err);\n      }, () => {\n        uploadTask.snapshot.ref.getDownloadURL().then(url => {\n          setMovie(prev => {\n            return { ...prev,\n              [item.label]: url\n            };\n          });\n          setUploaded(prev => prev + 1);\n        });\n      });\n    });\n  };\n\n  const handleUpload = e => {\n    e.preventDefault();\n    upload([{\n      file: img,\n      label: 'img'\n    }, {\n      file: imgTitle,\n      label: 'imgTitle'\n    }, {\n      file: imgSm,\n      label: 'imgSm'\n    }, {\n      file: trailer,\n      label: 'trailer'\n    }, {\n      file: video,\n      label: 'video'\n    }]);\n  }; // CREATE FILE\n\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    createMovie(movie, dispatch);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"newProduct\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"addProductTitle\",\n      children: \"New Movie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"addProductForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"img\",\n          name: \"img\",\n          onChange: e => setImg(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"imgTitle\",\n          name: \"imgTitle\",\n          onChange: e => setImgTitle(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Thumbnail image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"imgSm\",\n          name: \"imgSm\",\n          onChange: e => setImgSm(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"John Wick\",\n          name: \"title\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"description\",\n          name: \"desc\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Year\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"year\",\n          name: \"year\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Genre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"genre\",\n          name: \"genre\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Duration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"duration\",\n          name: \"duration\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Limit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"limit\",\n          name: \"limit\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Is Series?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"isSeries\",\n          id: \"isSeries\",\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"false\",\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"true\",\n            children: \"Yes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Trailer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"trailer\",\n          onChange: e => setTrailer(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"video\",\n          onChange: e => setVideo(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), uploaded === 5 ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleSubmit,\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}\n\n_s(NewProduct, \"SyFf4lleb0fzbakey/aLNGVVzh8=\");\n\n_c = NewProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewProduct\");","map":{"version":3,"sources":["/Users/simoncatalin/Desktop/JavaScript/netflix-clone/admin/src/pages/new-product/NewProduct.jsx"],"names":["React","useState","useContext","storage","createMovie","MovieContext","NewProduct","movie","setMovie","img","setImg","imgTitle","setImgTitle","imgSm","setImgSm","trailer","setTrailer","video","setVideo","uploaded","setUploaded","dispatch","handleChange","e","value","target","name","upload","items","forEach","item","fileName","Date","getTime","label","file","uploadTask","ref","put","on","snapshot","progress","bytesTransferred","totalBytes","console","log","err","getDownloadURL","then","url","prev","handleUpload","preventDefault","handleSubmit","files"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport './newProduct.scss';\nimport storage from '../../firebase';\nimport { createMovie } from '../../context/movieContext/apiCalls';\nimport { MovieContext } from '../../context/movieContext/MovieContext';\n\nexport default function NewProduct() {\n    const [movie, setMovie] = useState(null);\n    const [img, setImg] = useState(null);\n    const [imgTitle, setImgTitle] = useState(null);\n    const [imgSm, setImgSm] = useState(null);\n    const [trailer, setTrailer] = useState(null);\n    const [video, setVideo] = useState(null);\n\n    const [uploaded, setUploaded] = useState(null);\n\n    const { dispatch } = useContext(MovieContext);\n\n    const handleChange = (e) => {\n        const value = e.target.value;\n        setMovie({...movie, [e.target.name]: value});\n    };\n\n// UPLOAD FILE\n    const upload = (items) => {\n        items.forEach((item) => {\n            const fileName = new Date().getTime() + item.label + item.file.name;\n            const uploadTask = storage.ref(`/items/${fileName}`).put(item.file);\n            uploadTask.on('state_changed', (snapshot) => {\n                const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                console.log('Upload is ' + progress + '% done.')\n            }, \n            (err) => {\n                console.log(err);\n            }, \n            () => {\n                uploadTask.snapshot.ref.getDownloadURL().then((url) => {\n                    setMovie((prev) => {\n                        return { ...prev, [item.label] : url };\n                    });\n                    setUploaded((prev) => prev + 1);\n                });\n            });\n        });\n    };\n\n    const handleUpload = (e) => {\n        e.preventDefault();\n        upload([\n            {file: img, label: 'img'},\n            {file: imgTitle, label: 'imgTitle'},\n            {file: imgSm, label: 'imgSm'},\n            {file: trailer, label: 'trailer'},\n            {file: video, label: 'video'},\n        ]);\n    };\n\n// CREATE FILE\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        createMovie(movie, dispatch);\n    };\n\n    return (\n        <div className='newProduct'>\n            <h1 className=\"addProductTitle\">New Movie</h1>\n            <form className=\"addProductForm\">\n                <div className=\"addProductItem\">\n                    <label>Image</label>\n                    <input \n                        type=\"file\" \n                        id=\"img\" \n                        name=\"img\" \n                        onChange={(e) => setImg(e.target.files[0])} \n                    />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Title image</label>\n                    <input \n                        type=\"file\" \n                        id=\"imgTitle\" \n                        name=\"imgTitle\" \n                        onChange={(e) => setImgTitle(e.target.files[0])} \n                    />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Thumbnail image</label>\n                    <input \n                        type=\"file\" \n                        id=\"imgSm\" \n                        name=\"imgSm\" \n                        onChange={(e) => setImgSm(e.target.files[0])} \n                    />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Title</label>\n                    <input type=\"text\" placeholder=\"John Wick\" name=\"title\" onChange={handleChange} />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Description</label>\n                    <input type=\"text\" placeholder=\"description\" name=\"desc\" onChange={handleChange} />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Year</label>\n                    <input type=\"text\" placeholder=\"year\" name=\"year\" onChange={handleChange} />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Genre</label>\n                    <input type=\"text\" placeholder=\"genre\" name=\"genre\" onChange={handleChange} />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Duration</label>\n                    <input type=\"text\" placeholder=\"duration\" name=\"duration\" onChange={handleChange} />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Limit</label>\n                    <input type=\"text\" placeholder=\"limit\" name=\"limit\" onChange={handleChange} />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Is Series?</label>\n                    <select name=\"isSeries\" id=\"isSeries\" onChange={handleChange}>\n                        <option value=\"false\">No</option>\n                        <option value=\"true\">Yes</option>\n                    </select>\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Trailer</label>\n                    <input \n                        type=\"file\" \n                        name=\"trailer\" \n                        onChange={(e) => setTrailer(e.target.files[0])} \n                    />\n                </div>\n                <div className=\"addProductItem\">\n                    <label>Video</label>\n                    <input \n                        type=\"file\" \n                        name=\"video\" \n                        onChange={(e) => setVideo(e.target.files[0])} \n                    />\n                </div>\n                {uploaded === 5 ? (\n                    <button className=\"addProductButton\" onClick={handleSubmit}>Create</button>\n                ) : (\n                    <button className=\"addProductButton\" onClick={handleUpload}>Upload</button>\n                )}\n            </form>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}